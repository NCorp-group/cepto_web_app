{"remainingRequest":"/home/jens/repos/cepto_web_app/node_modules/babel-loader/lib/index.js!/home/jens/repos/cepto_web_app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/jens/repos/cepto_web_app/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/jens/repos/cepto_web_app/src/components/Table.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/jens/repos/cepto_web_app/src/components/Table.vue","mtime":1620580597300},{"path":"/home/jens/repos/cepto_web_app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jens/repos/cepto_web_app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/jens/repos/cepto_web_app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jens/repos/cepto_web_app/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvaG9tZS9qZW5zL3JlcG9zL2NlcHRvX3dlYl9hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsgLy9pbXBvcnQgVmlzaXQgZnJvbSAndmlzaXQuanMnCi8vaW1wb3J0IEV2ZW50IGZyb20gJ2V2ZW50LmpzJwoKdmFyIFZpc2l0ID0gZnVuY3Rpb24gVmlzaXQoc3RhdGUsIHZpc2l0X2lkLCBkYXRldGltZSwgZGVzYywgZHVyYXRpb24sIGV2ZW50cykgewogIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWaXNpdCk7CgogIHRoaXMuc3RhdGUgPSBzdGF0ZTsKICB0aGlzLnZpc2l0X2lkID0gdmlzaXRfaWQ7CiAgdGhpcy5kYXRldGltZSA9IGRhdGV0aW1lOwogIHRoaXMuZGVzYyA9IGRlc2M7CiAgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uOwogIHRoaXMuZXZlbnRzID0gZXZlbnRzOwp9OwoKdmFyIEV2ZW50ID0gZnVuY3Rpb24gRXZlbnQodHlwZSwgZGF0ZXRpbWUsIHRpbWVfc2luY2VfbGFzdCkgewogIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFdmVudCk7CgogIHRoaXMudHlwZSA9IHR5cGU7CiAgdGhpcy5kYXRldGltZSA9IGRhdGV0aW1lOwogIHRoaXMudGltZV9zaW5jZV9sYXN0ID0gdGltZV9zaW5jZV9sYXN0Owp9OwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJldmVudC10YWJsZSIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHZpc2l0czogW10sCiAgICAgIGFwaV9kYXRhOiBudWxsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgb25fbG9nOiBmdW5jdGlvbiBvbl9sb2coKSB7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuYXBpX2RhdGEpOwogICAgfSwKICAgIG9uX3JlZnJlc2g6IGZ1bmN0aW9uIG9uX3JlZnJlc2goKSB7CiAgICAgIC8vdGhpcy5jbGVhcl9sb2dzKCk7CiAgICAgIHRoaXMuZmV0Y2hfbG9ncygpOwogICAgICB0aGlzLnByb2Nlc3NfYXBpX2RhdGEoKTsKICAgIH0sCiAgICBjbGVhcl9sb2dzOiBmdW5jdGlvbiBjbGVhcl9sb2dzKCkgewogICAgICB0aGlzLnZpc2l0cyA9IFtdOwogICAgfSwKICAgIGZldGNoX2xvZ3M6IGZ1bmN0aW9uIGZldGNoX2xvZ3MoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBheGlvcy5nZXQoJ2h0dHBzOi8vbG9jYWxob3N0OjUwMDEvRmV0Y2hFdmVudHMvJTdCJTIyc2Vzc2lvbl90b2tlbiUyMjolMjI2MDFiYzk3My1kYTRkLTQ3Y2MtYjNlYi00ZWI3YzkyMWJjNDglMjIlN0QnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHJldHVybiBfdGhpcy5hcGlfZGF0YSA9IHJlc3BvbnNlLmRhdGEuZXZlbnRzOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICBwcm9jZXNzX2FwaV9kYXRhOiBmdW5jdGlvbiBwcm9jZXNzX2FwaV9kYXRhKCkgewogICAgICAvLyBORVcgSU1QTEVNRU5UQVRJT04KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmFwaV9kYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGxhc3RfZXZlbnQgPSBudWxsOwogICAgICAgIHZhciBldmVudHMgPSBudWxsOwoKICAgICAgICB3aGlsZSAobGFzdF9ldmVudC52aXNpdF9pZCA9PT0gY3VycmVudF9ldmVudC52aXNpdF9pZCB8fCBpID09IDApIHsKICAgICAgICAgIHZhciBjdXJyZW50X2RhdGUgPSBuZXcgRGF0ZSh0aGlzLmFwaV9kYXRhW2ldLnRpbWUpOwogICAgICAgICAgdmFyIGN1cnJlbnRfc2luY2VfbGFzdCA9IG5ldyBEYXRlKHRoaXMuYXBpX2RhdGFbaV0udGltZV9zaW5jZV9sYXN0KTsKICAgICAgICAgIHZhciBjdXJyZW50X2V2ZW50ID0gRXZlbnQodGhpcy5hcGlfZGF0YVtpXS5ldmVudF90eXBlLCBjdXJyZW50X2RhdGUsIGN1cnJlbnRfc2luY2VfbGFzdC5nZXRNaW51dGVzKCkpOwogICAgICAgICAgZXZlbnRzLnVuc2hpZnQoY3VycmVudF9ldmVudCk7CiAgICAgICAgICBsYXN0X2V2ZW50ID0gY3VycmVudF9ldmVudDsKICAgICAgICAgIGkrKzsKICAgICAgICB9CgogICAgICAgIHZhciBzdGF0ZSA9ICIiOwoKICAgICAgICBpZiAoZXZlbnRzLmxlbmd0aCA8IDQpIHsKICAgICAgICAgIHN0YXRlID0gImluY29tcGxldGUiOwogICAgICAgIH0gZWxzZSBpZiAoZXZlbnRzLmxlbmd0aCA9PSA0KSB7CiAgICAgICAgICBzdGF0ZSA9ICJjb21wbGV0ZSI7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmFwaV9kYXRhLmxlbmd0aCA9PT0gaSAmJiB0aGlzLmFwaV9kYXRhW2ldLmV2ZW50X3R5cGUgIT09ICJhcnJpdmVkX2F0X2JlZCIpIHsKICAgICAgICAgIHN0YXRlID0gImluX3Byb2dyZXNzIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coIk1vcmUgdGhhbiA0IGV2ZW50cyBpbiB2aXNpdCIpOwogICAgICAgIH0KCiAgICAgICAgdmFyIGR1cmF0aW9uID0gZXZlbnRzWzFdLmRhdGV0aW1lLmdldFRpbWUoKSAtIGV2ZW50c1tldmVudHMubGVuZ3RoXS5kYXRldGltZS5nZXRUaW1lKCk7CiAgICAgICAgdmFyIGR1cmF0aW9uX2RhdGUgPSBuZXcgRGF0ZShkdXJhdGlvbik7CiAgICAgICAgdmFyIGR1cmF0aW9uX21pbnV0ZXMgPSBkdXJhdGlvbl9kYXRlLmdldFRpbWUoKSAvIDEwMDAgLyA2MDsKICAgICAgICB2YXIgY3VycmVudF92aXNpdCA9IG5ldyBWaXNpdChzdGF0ZSwgZXZlbnRzWzBdLnZpc2l0X2lkLCBldmVudHNbMF0uZGF0ZSwgc3RhdGUsIGR1cmF0aW9uX21pbnV0ZXMsIGV2ZW50cyk7CiAgICAgICAgdGhpcy52aXNpdHMudW5zaGlmdChjdXJyZW50X3Zpc2l0KTsKICAgICAgICBldmVudHMgPSBbXTsKICAgICAgfQogICAgICAvKgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYXBpX2RhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBJbml0aWFsaXNhdGlvbgogICAgICAgIHZhciBsYXN0X2V2ZW50ID0gbnVsbDsKICAgICAgICBpZiAoaSA+IDApIHsKICAgICAgICAgIGxhc3RfZXZlbnQgPSB0aGlzLmFwaV9kYXRhW2ktMV07CiAgICAgICAgfQogICAgICAgIHZhciBjdXJyZW50X2V2ZW50ID0gdGhpcy5hcGlfZGF0YVtpXTsKICAgICAgICAgLy8gUGVyIHZpc2l0IGxvb3AKICAgICAgICB2YXIgY3VycmVudF92aXNpdCA9IFtdOwogICAgICAgIHdoaWxlIChjdXJyZW50X2V2ZW50LnZpc2l0X2lkICE9PSBsYXN0X2V2ZW50LnZpc2l0X2lkKSB7CiAgICAgICAgICAKICAgICAgICB9CiAgICAgIH0KICAgICAgKi8KCiAgICAgIC8qCiAgICAgIC8vIHZhciBjdXJyZW50X3Zpc2l0X2lkID0gMDsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFwaV9kYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgLy8gSW5pdGlhbGlzYXRpb24KICAgICAgICB2YXIgbGFzdF9ldmVudCA9IG51bGw7CiAgICAgICAgaWYgKGkgPiAwKSB7CiAgICAgICAgICBsYXN0X2V2ZW50ID0gdGhpcy5hcGlfZGF0YVtpLTFdOwogICAgICAgIH0KICAgICAgICB2YXIgY3VycmVudF9ldmVudCA9IHRoaXMuYXBpX2RhdGFbaV07CiAgICAgICAgIC8vIGlmIChjdXJyZW50X2V2ZW50LnZpc2l0X2lkICE9PSBsYXN0X2V2ZW50LnZpc2l0X2lkKSB7CiAgICAgICAgLy8gICBjdXJyZW50X3Zpc2l0X2lkKys7CiAgICAgICAgLy8gfQogICAgICAgICAvLyBQcm9jZXNzaW5nCiAgICAgICAgdmFyIGN1cnJlbnRfZXZlbnRfdHlwZSA9IGN1cnJlbnRfZXZlbnQuZXZlbnRfdHlwZTsKICAgICAgICAvL2NvbnNvbGUubG9nKG5ld19ldmVudF90eXBlKTsKICAgICAgICAgLy8gZmlyc3QgdGltZXN0YW1wCiAgICAgICAgLy8gZm9yIGFic29sdXRlIGRhdGUgYW5kIHRpbWUKICAgICAgICB2YXIgY3VycmVudF9kYXRlX3N0ciA9IGN1cnJlbnRfZXZlbnQudGltZTsKICAgICAgICB2YXIgZGF0ZV9vYmogPSBuZXcgRGF0ZShjdXJyZW50X2RhdGVfc3RyKTsKICAgICAgICAvL2NvbnNvbGUubG9nKCJUaGlzIGlzIHRoZSBkYXRlOiAiICsgZGF0ZV9vYmoudG9Mb2NhbGVEYXRlU3RyaW5nKCdkYS1ESycpKTsKICAgICAgICAgdmFyIGN1cnJlbnRfZGF0ZSA9IGRhdGVfb2JqLnRvTG9jYWxlRGF0ZVN0cmluZygnZGEtREsnKTsKICAgICAgICAvL2NvbnNvbGUubG9nKG5ld19kYXRlKTsKICAgICAgICAgdmFyIGN1cnJlbnRfdGltZXN0YW1wID0gZGF0ZV9vYmoudG9Mb2NhbGVUaW1lU3RyaW5nKCdkYS1ESycpOwogICAgICAgIC8vY29uc29sZS5sb2cobmV3X3RpbWVzdGFtcCk7CiAgICAgICAgIC8vIHNlY29uZCB0aW1lc3RhbXAKICAgICAgICAvLyBmb3IgdGhlIHJlbGF0aXZlIHRpbWUgc2luY2UgbGFzdCBldmVudAogICAgICAgIC8vIEFDVFVBTCBDT0RFIHZhciBzaW5jZV9sYXN0X2RhdGVfc3RyID0gY3VycmVudF9ldmVudC50aW1lOwogICAgICAgIC8vIEFDVFVBTCBDT0RFIHZhciBzaW5jZV9sYXN0X2RhdGVfb2JqID0gbmV3IERhdGUoc2luY2VfbGFzdF9kYXRlX3N0cik7CiAgICAgICAgLy9jb25zb2xlLmxvZygiU2luY2UgbGFzdCB0aW1lOiAiICsgc2luY2VfbGFzdF9kYXRlX29iaik7CiAgICAgICAgIC8vIGNvbXB1dGUgdGltZSBzaW5jZSBsYXN0IGV2ZW50LgogICAgICAgIAogICAgICAgIC8vIGxhc3QgdGltZXN0YW1wCiAgICAgICAgLy8gZm9yIHJlbGF0aXZlIHRpbWUgbGF0ZXIKICAgICAgICAKICAgICAgICB2YXIgY3VycmVudF90aW1lX3NpbmNlX2xhc3RfZXZlbnQgPSAiLSI7CiAgICAgICAgaWYgKGkgPiAwKSB7CiAgICAgICAgICB2YXIgbGFzdF9kYXRlX29iaiA9IG5ldyBEYXRlKGxhc3RfZXZlbnQudGltZSk7CiAgICAgICAgICAvL2NvbnNvbGUubG9nKGxhc3RfZGF0ZV9vYmouZ2V0TWludXRlcygpKTsKICAgICAgICAgIC8vIEFDVFVBTCBDT0RFCiAgICAgICAgICAvLyBuZXdfdGltZV9zaW5jZV9sYXN0X2V2ZW50ID0gZGF0ZV9vYmouZ2V0TWludXRlcygpIC0gbGFzdF9kYXRlX29iai5nZXRNaW51dGVzKCk7CiAgICAgICAgICAvL1RFU1QgQ09ERQogICAgICAgICAgY3VycmVudF90aW1lX3NpbmNlX2xhc3RfZXZlbnQgPSBsYXN0X2RhdGVfb2JqLmdldE1pbnV0ZXMoKTsKICAgICAgICB9CiAgICAgICAgLy9jb25zb2xlLmxvZyhuZXdfdGltZV9zaW5jZV9sYXN0X2V2ZW50KTsKICAgICAgICAgdGhpcy5ldmVudHMudW5zaGlmdCh7CiAgICAgICAgICBldmVudF90eXBlOiBjdXJyZW50X2V2ZW50X3R5cGUsCiAgICAgICAgICBkYXRlOiBjdXJyZW50X2RhdGUsCiAgICAgICAgICB0aW1lc3RhbXA6IGN1cnJlbnRfdGltZXN0YW1wLAogICAgICAgICAgdGltZV9zaW5jZV9sYXN0X2V2ZW50OiBjdXJyZW50X3RpbWVfc2luY2VfbGFzdF9ldmVudAogICAgICAgIH0pOwogICAgICB9CiAgICAgICovCgogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZmV0Y2hfbG9ncygpOwogICAgdGhpcy5wcm9jZXNzX2FwaV9kYXRhKCk7CiAgfQp9Ow=="},{"version":3,"sources":["/home/jens/repos/cepto_web_app/src/components/Table.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"table\" class=\"container\">\n    <h1>Patient Name</h1>\n    <h4>Event Logs</h4>\n    <button type=\"button\" @click=\"on_refresh\" class=\"btn btn-dark\">\n      Refresh\n    </button>\n    <button type=\"button\" @click=\"on_log\" class=\"btn btn-dark\">\n      Print API data\n    </button>\n    <table class=\"table mt-5\">\n      <thead>\n        <tr>\n          <th scope=\"col\">VisitID</th>\n          <th scope=\"col\">EventID</th>\n          <th scope=\"col\">Event Type</th>\n          <th scope=\"col\">Date</th>\n          <th scope=\"col\">Timestamp</th>\n          <th scope=\"col\">Time since last event</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"(visit, i) in visits\" :key=\"i\">\n          <th scope=\"row\">{{ visits.length - i++ }}</th>\n          <tbody>\n            <tr v-for=\"(event, j) in visits[i].events\" :key=\"j\">\n              <th scope=\"row\">{{ visits[i].events.length - i++ }}</th>\n              <td>{{ event.type }}</td>\n              <td>{{ event.datetime.toLocaleDateString('da-DK') }}</td>\n              <td>{{ event.datetime.toLocaleDateString('da-DK') }}</td>\n              <td>{{ event.time_since_last }}</td>\n            </tr>\n          </tbody>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\n//import Visit from 'visit.js'\n//import Event from 'event.js'\n\nclass Visit {\n  constructor(state, visit_id, datetime, desc, duration, events) {\n      this.state = state;\n      this.visit_id = visit_id;\n      this.datetime = datetime;\n      this.desc = desc;\n      this.duration = duration;\n      this.events = events;\n  }\n}\n\nclass Event {\n  constructor(type, datetime, time_since_last) {\n      this.type = type;\n      this.datetime = datetime;\n      this.time_since_last = time_since_last;\n  }\n}\n\nexport default {\n  name: \"event-table\",\n  data: () => ({ visits: [], api_data: null }),\n  methods: {\n    on_log() {\n      console.log(this.api_data);\n    },\n    on_refresh() {\n      //this.clear_logs();\n      this.fetch_logs();\n      this.process_api_data();\n    },\n    clear_logs() {\n      this.visits = [];\n    },\n    fetch_logs() {\n      axios.get('https://localhost:5001/FetchEvents/%7B%22session_token%22:%22601bc973-da4d-47cc-b3eb-4eb7c921bc48%22%7D')\n        .then(response => this.api_data = response.data.events)\n        .catch(error => console.log(error));\n    },\n    process_api_data() {\n      // NEW IMPLEMENTATION\n\n      for (let i = 0; i < this.api_data.length; i++) {\n        var last_event = null;\n        var events = null;\n\n        while (last_event.visit_id === current_event.visit_id || i == 0) {\n\n          var current_date = new Date(this.api_data[i].time);\n          var current_since_last = new Date(this.api_data[i].time_since_last);\n\n          var current_event = Event(\n            this.api_data[i].event_type,\n            current_date,\n            current_since_last.getMinutes()\n          );\n\n          events.unshift(current_event);\n\n          last_event = current_event;\n\n          i++;\n        }\n\n        var state = \"\";\n        if (events.length < 4) {\n          state = \"incomplete\";\n        }\n        else if (events.length == 4) {\n          state = \"complete\";\n        }\n        else if (this.api_data.length === i && this.api_data[i].event_type !== \"arrived_at_bed\") {\n          state = \"in_progress\";\n        }\n        else {\n          console.log(\"More than 4 events in visit\");\n        }\n\n        var duration = events[1].datetime.getTime() - events[events.length].datetime.getTime();\n        var duration_date = new Date(duration);\n        var duration_minutes = duration_date.getTime() / 1000 / 60;\n\n        var current_visit = new Visit(\n          state,\n          events[0].visit_id,\n          events[0].date,\n          state,\n          duration_minutes,\n          events\n        );\n\n        this.visits.unshift(current_visit);\n\n        events = [];\n      }\n\n      /*\n      for (let i = 0; i < this.api_data.length; i++) {\n        // Initialisation\n        var last_event = null;\n        if (i > 0) {\n          last_event = this.api_data[i-1];\n        }\n        var current_event = this.api_data[i];\n\n        // Per visit loop\n        var current_visit = [];\n        while (current_event.visit_id !== last_event.visit_id) {\n          \n        }\n      }\n      */\n      \n      /*\n      // var current_visit_id = 0;\n      for (let i = 0; i < this.api_data.length; i++) {\n        // Initialisation\n        var last_event = null;\n        if (i > 0) {\n          last_event = this.api_data[i-1];\n        }\n        var current_event = this.api_data[i];\n\n        // if (current_event.visit_id !== last_event.visit_id) {\n        //   current_visit_id++;\n        // }\n\n        // Processing\n        var current_event_type = current_event.event_type;\n        //console.log(new_event_type);\n\n        // first timestamp\n        // for absolute date and time\n        var current_date_str = current_event.time;\n        var date_obj = new Date(current_date_str);\n        //console.log(\"This is the date: \" + date_obj.toLocaleDateString('da-DK'));\n\n        var current_date = date_obj.toLocaleDateString('da-DK');\n        //console.log(new_date);\n\n        var current_timestamp = date_obj.toLocaleTimeString('da-DK');\n        //console.log(new_timestamp);\n\n        // second timestamp\n        // for the relative time since last event\n        // ACTUAL CODE var since_last_date_str = current_event.time;\n        // ACTUAL CODE var since_last_date_obj = new Date(since_last_date_str);\n        //console.log(\"Since last time: \" + since_last_date_obj);\n\n        // compute time since last event.\n        \n        // last timestamp\n        // for relative time later\n        \n        var current_time_since_last_event = \"-\";\n        if (i > 0) {\n          var last_date_obj = new Date(last_event.time);\n          //console.log(last_date_obj.getMinutes());\n          // ACTUAL CODE\n          // new_time_since_last_event = date_obj.getMinutes() - last_date_obj.getMinutes();\n          //TEST CODE\n          current_time_since_last_event = last_date_obj.getMinutes();\n        }\n        //console.log(new_time_since_last_event);\n\n        this.events.unshift({\n          event_type: current_event_type,\n          date: current_date,\n          timestamp: current_timestamp,\n          time_since_last_event: current_time_since_last_event\n        });\n      }\n      */\n    }\n  },\n  mounted() {\n    this.fetch_logs();\n    this.process_api_data();\n  },\n};\n</script>\n\n<style>\n#table {\n  height: 100%;\n  flex-grow: 2;\n  padding: 0px 200px;\n  text-align: left;\n  color: #F6F6F6;\n  position: absolute;\n  margin-left: 200px;\n}\nbutton {\n  margin: 30px 10px 20px 0px;\n  padding: 10px 15px;\n  border-style: none;\n}\ntable > td {\n  padding: 5px;\n}\n</style>"],"sourceRoot":""}]}